<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Rooms - Prince Alex Airbnb, Uthiru</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; line-height: 1.6; color: #333; overflow-x: hidden; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        
        .navbar { position: fixed; top: 0; width: 100%; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); z-index: 1000; padding: 1rem 0; transition: all 0.3s ease; box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1); }
        .nav-container { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .nav-logo h2 { font-family: 'Montserrat', sans-serif; color: #1a365d; font-size: 1.5rem; font-weight: 600; }
        .nav-logo span { color: #d4af37; font-size: 0.9rem; font-weight: 400; }
        .nav-menu { display: flex; align-items: center; gap: 2rem; }
        .nav-link { text-decoration: none; color: #333; font-weight: 500; transition: color 0.3s ease; position: relative; }
        .nav-link:hover, .nav-link.active { color: #d4af37; }
        .nav-link.active::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 100%; height: 2px; background: #d4af37; }
        .login-btn { background: #d4af37; color: white !important; padding: 0.5rem 1.5rem; border-radius: 25px; transition: all 0.3s ease; }
        .login-btn:hover { background: #b8941f; transform: translateY(-2px); }
        
        .user-menu { position: relative; display: none; }
        .user-menu-btn { display: flex; align-items: center; gap: 0.5rem; background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 25px; padding: 0.5rem 1rem; cursor: pointer; transition: all 0.3s ease; font-family: 'Poppins', sans-serif; font-weight: 500; color: #333; min-height: 44px; }
        .user-menu-btn:hover { background: #e9ecef; border-color: #d4af37; transform: translateY(-2px); }
        .user-menu-btn img { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; }
        .dropdown-arrow { font-size: 0.8rem; transition: transform 0.3s ease; }
        .user-menu-btn:hover .dropdown-arrow { transform: rotate(180deg); }
        .user-dropdown { position: absolute; top: 100%; right: 0; background: white; border: 1px solid #e9ecef; border-radius: 10px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); min-width: 200px; z-index: 1000; display: none; margin-top: 0.5rem; }
        .dropdown-item { display: flex; align-items: center; gap: 0.8rem; padding: 1rem; text-decoration: none; color: #333; transition: background-color 0.3s ease; border-bottom: 1px solid #f8f9fa; min-height: 44px; }
        .dropdown-item:hover { background: #f8f9fa; color: #d4af37; }
        .dropdown-item:last-child { border-bottom: none; }
        .item-icon { font-size: 1.2rem; width: 20px; text-align: center; }
        
        .hamburger { display: none; flex-direction: column; cursor: pointer; z-index: 1001; }
        .hamburger span { width: 25px; height: 3px; background: #333; margin: 3px 0; transition: 0.3s; }
        .hamburger.active span:nth-child(1) { transform: rotate(-45deg) translate(-5px, 6px); }
        .hamburger.active span:nth-child(2) { opacity: 0; }
        .hamburger.active span:nth-child(3) { transform: rotate(45deg) translate(-5px, -6px); }
        
        .listings-header { margin-top: 70px; padding: 3rem 0 2rem; background: linear-gradient(135deg, #1a365d, #2d5a87); color: white; text-align: center; }
        .listings-header h1 { font-size: 2.5rem; font-weight: 600; margin-bottom: 1rem; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); }
        .listings-header p { font-size: 1.1rem; opacity: 0.9; max-width: 600px; margin: 0 auto; }
        
        .search-section { padding: 3rem 0; background: white; border-bottom: 1px solid #e9ecef; }
        .search-form { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); }
        .search-grid { display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 1rem; align-items: end; }
        .search-group { display: flex; flex-direction: column; }
        .search-group label { font-weight: 500; color: #333; margin-bottom: 0.5rem; font-size: 0.9rem; }
        .search-group input, .search-group select { padding: 0.8rem; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; font-family: 'Poppins', sans-serif; transition: all 0.3s ease; }
        .search-group input:focus, .search-group select:focus { outline: none; border-color: #d4af37; box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1); }
        .search-btn { background: #d4af37; color: white; border: none; padding: 0.8rem 2rem; border-radius: 8px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; min-height: 44px; }
        .search-btn:hover { background: #b8941f; transform: translateY(-2px); }
        
        .filters-section { padding: 2rem 0; background: #f8f9fa; }
        .filters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem; }
        .results-info { color: #666; font-size: 1rem; }
        .filters-controls { display: flex; gap: 1rem; align-items: center; flex-wrap: wrap; }
        .filter-group { display: flex; align-items: center; gap: 0.5rem; }
        .filter-group label { font-weight: 500; color: #333; font-size: 0.9rem; }
        .filter-group select { padding: 0.5rem; border: 1px solid #ddd; border-radius: 6px; font-size: 0.9rem; }
        .clear-filters { background: #6c757d; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.9rem; cursor: pointer; transition: all 0.3s ease; }
        .clear-filters:hover { background: #5a6268; }
        
        .rooms-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 2rem; }
        .room-card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08); transition: all 0.3s ease; border: 1px solid #e9ecef; }
        .room-card:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15); }
        .room-image { height: 250px; overflow: hidden; position: relative; }
        .room-image img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; }
        .room-card:hover .room-image img { transform: scale(1.1); }
        .room-badge { position: absolute; top: 1rem; left: 1rem; background: #d4af37; color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600; }
        .room-content { padding: 1.5rem; }
        .room-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem; }
        .room-title { font-size: 1.3rem; font-weight: 600; color: #1a365d; }
        .room-price { text-align: right; }
        .price-amount { font-size: 1.2rem; font-weight: 700; color: #d4af37; }
        .price-period { font-size: 0.9rem; color: #666; }
        .room-rating { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; }
        .stars { color: #ffc107; }
        .rating-text { color: #666; font-size: 0.9rem; }
        .room-features { display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .room-feature { display: flex; align-items: center; gap: 0.3rem; color: #666; font-size: 0.9rem; }
        .room-description { color: #666; font-size: 0.9rem; line-height: 1.6; margin-bottom: 1.5rem; }
        .room-actions { display: flex; gap: 1rem; }
        .view-btn { flex: 1; background: #d4af37; color: white; border: none; padding: 1rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .view-btn:hover { background: #b8941f; transform: translateY(-2px); }
        .favorite-btn { background: none; border: 2px solid #ddd; color: #666; padding: 1rem; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
        .favorite-btn:hover { border-color: #d4af37; color: #d4af37; }
        .favorite-btn.active { border-color: #dc3545; color: #dc3545; }
        
        .footer { background: #1a1a1a; color: white; padding: 3rem 0 1rem; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-bottom: 2rem; }
        .footer-section h3, .footer-section h4 { margin-bottom: 1rem; color: #d4af37; }
        .footer-section p, .footer-section li { margin-bottom: 0.5rem; opacity: 0.8; }
        .footer-section ul { list-style: none; }
        .footer-section a { color: white; text-decoration: none; opacity: 0.8; transition: opacity 0.3s ease; }
        .footer-section a:hover { opacity: 1; color: #d4af37; }
        .social-links { display: flex; gap: 1rem; margin-top: 1rem; }
        .social-links a { font-size: 1.5rem; transition: transform 0.3s ease; }
        .social-links a:hover { transform: scale(1.2); }
        .footer-bottom { text-align: center; padding-top: 2rem; border-top: 1px solid #333; opacity: 0.6; }
        .designer-credit { margin-top: 0.5rem; font-size: 0.9rem; }
        .designer-credit a { color: #d4af37; text-decoration: none; font-weight: 500; transition: all 0.3s ease; }
        .designer-credit a:hover { color: #b8941f; text-decoration: underline; }
        
        @media (max-width: 1024px) { .search-grid { grid-template-columns: 1fr 1fr; gap: 1rem; } .search-btn { grid-column: 1 / -1; } .rooms-grid { grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); } }
        @media (max-width: 768px) { 
            .hamburger { display: flex; } 
            .nav-menu { position: fixed; left: -100%; top: 70px; flex-direction: column; background: white; width: 100%; text-align: center; transition: 0.3s; box-shadow: 0 10px 27px rgba(0, 0, 0, 0.05); padding: 2rem 0; } 
            .nav-menu.active { left: 0; } 
            .search-grid { grid-template-columns: 1fr; } 
            .filters-header { flex-direction: column; align-items: stretch; } 
            .filters-controls { justify-content: center; } 
            .rooms-grid { grid-template-columns: 1fr; }
        }
        @media (max-width: 480px) { .container { padding: 0 15px; } .listings-header h1 { font-size: 2rem; } .room-actions { flex-direction: column; } }
        
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .room-card { animation: fadeInUp 0.6s ease forwards; }
        .room-card:nth-child(even) { animation-delay: 0.1s; }
        html { scroll-behavior: smooth; }
        
        @media (max-width: 768px) { button, .btn, .search-btn, .view-btn, .nav-link, input[type="submit"], input[type="button"] { min-height: 44px; min-width: 44px; touch-action: manipulation; } body { font-size: 16px; -webkit-text-size-adjust: 100%; } input, select, textarea { font-size: 16px; border-radius: 8px; padding: 1rem; } }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>Prince Alex Airbnb</h2>
                <span>Uthiru, Nairobi</span>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="listings.html" class="nav-link active">Rooms</a>
                <a href="about.html" class="nav-link">About</a>
                <a href="contact.html" class="nav-link">Contact</a>
                <a href="login.html" class="nav-link login-btn" id="login-nav-btn">Login</a>
                <div class="user-menu" id="user-menu" style="display: none;">
                    <button class="user-menu-btn" onclick="toggleUserMenu()">
                        <img id="user-avatar" src="images/prince-alex.png" alt="User Avatar">
                        <span id="user-name">Guest</span>
                        <span class="dropdown-arrow">▼</span>
                    </button>
                    <div class="user-dropdown" id="user-dropdown">
                        <a href="profile.html" class="dropdown-item">
                            <span class="item-icon">👤</span>
                            <span>My Profile</span>
                        </a>
                        <a href="listings.html" class="dropdown-item">
                            <span class="item-icon">🏠</span>
                            <span>Browse Rooms</span>
                        </a>
                        <button onclick="logout()" class="dropdown-item" style="background: none; border: none; width: 100%; text-align: left; cursor: pointer;">
                            <span class="item-icon">🚪</span>
                            <span>Logout</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="hamburger"><span></span><span></span><span></span></div>
        </div>
    </nav>

    <section class="listings-header">
        <div class="container">
            <h1>Our Beautiful Rooms</h1>
            <p>Discover comfort and convenience in our 8 carefully designed accommodations</p>
        </div>
    </section>

    <section class="search-section">
        <div class="container">
            <div class="search-form">
                <div class="search-grid">
                    <div class="search-group">
                        <label for="checkin">Check-in Date</label>
                        <input type="date" id="checkin" name="checkin">
                    </div>
                    <div class="search-group">
                        <label for="checkout">Check-out Date</label>
                        <input type="date" id="checkout" name="checkout">
                    </div>
                    <div class="search-group">
                        <label for="guests">Guests</label>
                        <select id="guests" name="guests">
                            <option value="1">1 guest</option>
                            <option value="2">2 guests</option>
                            <option value="3">3 guests</option>
                            <option value="4">4 guests</option>
                        </select>
                    </div>
                    <button class="search-btn" onclick="searchRooms()">Search</button>
                </div>
            </div>
        </div>
    </section>

    <section class="filters-section">
        <div class="container">
            <div class="filters-header">
                <div class="results-info">
                    <span id="results-count">8 rooms available</span>
                </div>
                <div class="filters-controls">
                    <div class="filter-group">
                        <label for="sort">Sort by:</label>
                        <select id="sort" onchange="sortRooms()">
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="rating">Rating</option>
                            <option value="name">Name</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="price-range">Max Price:</label>
                        <select id="price-range" onchange="filterByPrice()">
                            <option value="">Any Price</option>
                            <option value="3000">Under KES 3,000</option>
                            <option value="4000">Under KES 4,000</option>
                            <option value="5000">Under KES 5,000</option>
                        </select>
                    </div>
                    <button class="clear-filters" onclick="clearFilters()">Clear Filters</button>
                </div>
            </div>
            
            <div class="rooms-grid" id="rooms-grid">
                <!-- Rooms will be loaded here -->
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Prince Alex Airbnb</h3>
                    <p>Your home away from home in Uthiru, Nairobi</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook">📘</a>
                        <a href="#" aria-label="Instagram">📷</a>
                        <a href="#" aria-label="WhatsApp">📱</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="listings.html">Rooms</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact Info</h4>
                    <p>📍 Uthiru, Nairobi, Kenya</p>
                    <p>📞 +254 717 384 875</p>
                    <p>✉️ princealexdigital@gmail.com</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Prince Alex Airbnb. All rights reserved.</p>
                <p class="designer-credit">Designed by <a href="https://www.princealex.pro" target="_blank" rel="noopener">Prince Alex Digital</a></p>
            </div>
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    
    <script>
        const firebaseConfig = { apiKey: "AIzaSyAUNs3WYS2mkvPvzRDfhyZFUbP2XpZjDQg", authDomain: "retailflow-pos-11726.firebaseapp.com", projectId: "retailflow-pos-11726", storageBucket: "retailflow-pos-11726.firebasestorage.app", messagingSenderId: "309314798354", appId: "1:309314798354:web:30784c2b2e7e42168629cb" };
        let firebaseApp, auth, db, currentUser;

        const roomsData = [
            { id: 1, name: 'Deluxe Suite', price: 4500, type: 'suite', maxGuests: 2, rating: 4.8, reviews: 24, image: 'https://images.unsplash.com/photo-1631049307264-da0ec9d70304?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', features: ['🛏️ King Bed', '❄️ AC', '📶 WiFi', '🛁 Private Bath'], description: 'Luxurious suite with premium amenities and stunning city views.' },
            { id: 2, name: 'Executive Room', price: 3800, type: 'double', maxGuests: 2, rating: 4.6, reviews: 18, image: 'https://images.unsplash.com/photo-1618773928121-c32242e63f39?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', features: ['🛏️ Queen Bed', '❄️ AC', '📶 WiFi', '💼 Work Desk'], description: 'Perfect for business travelers with modern amenities.' },
            { id: 3, name: 'Standard Room', price: 3200, type: 'single', maxGuests: 2, rating: 4.5, reviews: 15, image: 'https://images.unsplash.com/photo-1566665797739-1674de7a421a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', features: ['🛏️ Double Bed', '❄️ AC', '📶 WiFi'], description: 'Comfortable and affordable accommodation for couples.' },
            { id: 4, name: 'Family Room', price: 5200, type: 'family', maxGuests: 4, rating: 4.7, reviews: 12, image: 'https://images.unsplash.com/photo-1595576508898-0ad5c879a061?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', features: ['🛏️ 2 Beds', '❄️ AC', '📶 WiFi', '🛁 2 Baths'], description: 'Spacious room perfect for families with children.' },
            { id: 5, name: 'Premium Suite', price: 5800, type: 'suite', maxGuests: 2, rating: 4.9, reviews: 8, image: 'https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', features: ['🛏️ King Bed', '❄️ AC', '📶 WiFi', '🛁 Jacuzzi'], description: 'Our finest accommodation with luxury amenities.' },
            { id: 6, name: 'Budget Room', price: 2800, type: 'budget', maxGuests: 1, rating: 4.3, reviews: 20, image: 'https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', features: ['🛏️ Single Bed', '📶 WiFi'], description: 'Affordable comfort for solo travelers.' },
            { id: 7, name: 'Garden View Room', price: 4200, type: 'double', maxGuests: 2, rating: 4.6, reviews: 16, image: 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', features: ['🛏️ Queen Bed', '❄️ AC', '📶 WiFi', '🌿 Garden View'], description: 'Peaceful room overlooking our beautiful garden.' },
            { id: 8, name: 'Business Suite', price: 4800, type: 'suite', maxGuests: 2, rating: 4.7, reviews: 14, image: 'https://images.unsplash.com/photo-1631049035182-249067d7618e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80', features: ['🛏️ King Bed', '❄️ AC', '📶 WiFi', '💼 Office Space'], description: 'Ideal for business travelers with dedicated workspace.' }
        ];

        let filteredRooms = [...roomsData];

        function initializeFirebase() {
            if (typeof firebase !== 'undefined') {
                firebaseApp = firebase.initializeApp(firebaseConfig);
                auth = firebase.auth();
                db = firebase.firestore();
                auth.onAuthStateChanged((user) => {
                    currentUser = user;
                    updateNavigationForAuthState(user);
                });
                return true;
            }
            return false;
        }

        function updateNavigationForAuthState(user) {
            const loginBtn = document.getElementById('login-nav-btn');
            const userMenu = document.getElementById('user-menu');
            
            if (user) {
                if (loginBtn) loginBtn.style.display = 'none';
                if (userMenu) {
                    userMenu.style.display = 'block';
                    const userName = document.getElementById('user-name');
                    const userAvatar = document.getElementById('user-avatar');
                    if (userName) {
                        const displayName = user.displayName || 'User';
                        userName.textContent = displayName.split(' ')[0];
                    }
                    if (userAvatar && user.photoURL) {
                        userAvatar.src = user.photoURL;
                    }
                }
            } else {
                if (loginBtn) loginBtn.style.display = 'inline-block';
                if (userMenu) userMenu.style.display = 'none';
            }
        }
        
        function toggleUserMenu() {
            const dropdown = document.getElementById('user-dropdown');
            if (dropdown) {
                dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
            }
        }
        
        async function logout() {
            try {
                await auth.signOut();
                showNotification('👋 Successfully logged out', 'success');
                setTimeout(() => { window.location.href = 'index.html'; }, 1000);
            } catch (error) {
                console.error('Logout error:', error);
                showNotification('Error logging out. Please try again.', 'error');
            }
        }

        function initializeMobileNavigation() {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');
            const body = document.body;
            if (hamburger && navMenu) {
                hamburger.addEventListener('click', function(e) {
                    e.stopPropagation();
                    navMenu.classList.toggle('active');
                    hamburger.classList.toggle('active');
                    body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : 'auto';
                });
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', () => {
                        navMenu.classList.remove('active');
                        hamburger.classList.remove('active');
                        body.style.overflow = 'auto';
                    });
                });
            }
        }

        function loadRooms() {
            const roomsGrid = document.getElementById('rooms-grid');
            roomsGrid.innerHTML = '';
            filteredRooms.forEach((room, index) => {
                const roomCard = document.createElement('div');
                roomCard.className = 'room-card';
                roomCard.style.animationDelay = `${index * 0.1}s`;
                roomCard.innerHTML = `
                    <div class="room-image">
                        <img src="${room.image}" alt="${room.name}">
                        <div class="room-badge">${room.type.charAt(0).toUpperCase() + room.type.slice(1)}</div>
                    </div>
                    <div class="room-content">
                        <div class="room-header">
                            <h3 class="room-title">${room.name}</h3>
                            <div class="room-price">
                                <div class="price-amount">KES ${room.price.toLocaleString()}</div>
                                <div class="price-period">per night</div>
                            </div>
                        </div>
                        <div class="room-rating">
                            <span class="stars">${'★'.repeat(Math.floor(room.rating))}${'☆'.repeat(5 - Math.floor(room.rating))}</span>
                            <span class="rating-text">${room.rating} (${room.reviews} reviews)</span>
                        </div>
                        <div class="room-features">
                            ${room.features.map(feature => `<span class="room-feature">${feature}</span>`).join('')}
                        </div>
                        <p class="room-description">${room.description}</p>
                        <div class="room-actions">
                            <button class="view-btn" onclick="viewRoom(${room.id})">View Details & Book</button>
                            <button class="favorite-btn" onclick="toggleFavorite(${room.id})" title="Add to favorites">❤️</button>
                        </div>
                    </div>
                `;
                roomsGrid.appendChild(roomCard);
            });
        }

        function viewRoom(roomId) {
            const searchCriteria = {
                checkin: document.getElementById('checkin').value,
                checkout: document.getElementById('checkout').value,
                guests: document.getElementById('guests').value
            };
            localStorage.setItem('selectedRoomId', roomId);
            localStorage.setItem('searchCriteria', JSON.stringify(searchCriteria));
            window.location.href = 'property.html';
        }

        function searchRooms() {
            const checkin = document.getElementById('checkin').value;
            const checkout = document.getElementById('checkout').value;
            const guests = parseInt(document.getElementById('guests').value);
            
            filteredRooms = roomsData.filter(room => {
                return room.maxGuests >= guests;
            });
            
            loadRooms();
            updateResultsCount();
        }

        function sortRooms() {
            const sortBy = document.getElementById('sort').value;
            switch(sortBy) {
                case 'price-low': filteredRooms.sort((a, b) => a.price - b.price); break;
                case 'price-high': filteredRooms.sort((a, b) => b.price - a.price); break;
                case 'rating': filteredRooms.sort((a, b) => b.rating - a.rating); break;
                case 'name': filteredRooms.sort((a, b) => a.name.localeCompare(b.name)); break;
            }
            loadRooms();
        }

        function filterByPrice() {
            const maxPrice = parseInt(document.getElementById('price-range').value);
            if (maxPrice) {
                filteredRooms = roomsData.filter(room => room.price <= maxPrice);
            } else {
                filteredRooms = [...roomsData];
            }
            loadRooms();
            updateResultsCount();
        }

        function clearFilters() {
            document.getElementById('sort').value = 'price-low';
            document.getElementById('price-range').value = '';
            filteredRooms = [...roomsData];
            loadRooms();
            updateResultsCount();
        }

        function updateResultsCount() {
            document.getElementById('results-count').textContent = `${filteredRooms.length} room${filteredRooms.length === 1 ? '' : 's'} available`;
        }

        function toggleFavorite(roomId) {
            const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
            const index = favorites.indexOf(roomId);
            if (index > -1) {
                favorites.splice(index, 1);
                showNotification('Removed from favorites', 'info');
            } else {
                favorites.push(roomId);
                showNotification('Added to favorites!', 'success');
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));
        }

        function initializeDateInputs() {
            const checkinInput = document.getElementById('checkin');
            const checkoutInput = document.getElementById('checkout');
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            checkinInput.min = today.toISOString().split('T')[0];
            checkoutInput.min = tomorrow.toISOString().split('T')[0];
            checkinInput.addEventListener('change', function() {
                const selectedDate = new Date(this.value);
                const nextDay = new Date(selectedDate);
                nextDay.setDate(nextDay.getDate() + 1);
                checkoutInput.min = nextDay.toISOString().split('T')[0];
                if (new Date(checkoutInput.value) <= selectedDate) {
                    checkoutInput.value = nextDay.toISOString().split('T')[0];
                }
            });
        }

        function loadSearchCriteria() {
            const searchCriteria = localStorage.getItem('searchCriteria');
            if (searchCriteria) {
                try {
                    const criteria = JSON.parse(searchCriteria);
                    const now = new Date();
                    const savedTime = new Date(criteria.timestamp || now);
                    const hoursDiff = (now - savedTime) / (1000 * 60 * 60);
                    if (hoursDiff < 1) {
                        if (criteria.checkin) document.getElementById('checkin').value = criteria.checkin;
                        if (criteria.checkout) document.getElementById('checkout').value = criteria.checkout;
                        if (criteria.guests) document.getElementById('guests').value = criteria.guests;
                    }
                } catch (e) { console.log('Error loading search criteria:', e); }
            }
        }

        function showNotification(message, type = 'info') {
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => notification.remove());
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `<div class="notification-content"><span class="notification-icon">${getNotificationIcon(type)}</span><span class="notification-message">${message}</span><button class="notification-close" onclick="this.parentElement.parentElement.remove()">&times;</button></div>`;
            notification.style.cssText = `position: fixed; top: 100px; right: 20px; background: ${getNotificationColor(type)}; color: white; padding: 1rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); z-index: 10000; min-width: 300px; max-width: 400px; animation: slideInRight 0.3s ease;`;
            const content = notification.querySelector('.notification-content');
            content.style.cssText = `display: flex; align-items: center; gap: 10px;`;
            const closeBtn = notification.querySelector('.notification-close');
            closeBtn.style.cssText = `background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; margin-left: auto; padding: 0 5px;`;
            document.body.appendChild(notification);
            setTimeout(() => { if (notification.parentElement) { notification.style.animation = 'slideOutRight 0.3s ease'; setTimeout(() => notification.remove(), 300); } }, 4000);
        }

        function getNotificationIcon(type) { switch(type) { case 'success': return '✓'; case 'error': return '✗'; case 'warning': return '⚠'; default: return 'ℹ'; } }
        function getNotificationColor(type) { switch(type) { case 'success': return '#28a745'; case 'error': return '#dc3545'; case 'warning': return '#ffc107'; default: return '#007bff'; } }

        document.addEventListener('DOMContentLoaded', function() {
            if (typeof firebase !== 'undefined') { initializeFirebase(); } else { setTimeout(() => initializeFirebase(), 1000); }
            initializeMobileNavigation();
            initializeDateInputs();
            loadSearchCriteria();
            loadRooms();
            updateResultsCount();
        });

        const style = document.createElement('style');
        style.textContent = `@keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } } @keyframes slideOutRight { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } }`;
        document.head.appendChild(style);
    </script>
</body>
</html>
